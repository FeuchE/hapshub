<!-- app/views/events/index.html.erb -->

<style>
  .footer-bar {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 60px;
    background-color: #ffffff;
    border-top: 1px solid #ddd;
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 1000;
  }

  .footer-icon {
    text-decoration: none;
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
</style>

<div style="max-width: 1200px; margin: 2rem auto; padding: 0 1rem; font-family: Arial, sans-serif;">
  <h1 style="margin-bottom: 1.5rem; font-weight: 700; font-size: 2rem; text-align: center;">Events</h1>

  <% if @events.any? %>
    <div style="
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    ">
      <% @events.each do |event| %>
        <div style="
          flex: 1 1 calc(33.333% - 1rem);
          min-width: 280px;
          max-width: 350px;
          background: white;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          overflow: hidden;
          display: flex;
          flex-direction: column;
          transition: box-shadow 0.3s ease;
        "
        onmouseover="this.style.boxShadow='0 6px 15px rgba(0,0,0,0.2)';"
        onmouseout="this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';">

          <!-- Event image -->
          <% if event.adventure.photo_resource.present? %>
            <div class="adventure-image">
              <img src="<%= "https://places.googleapis.com/v1/#{event.adventure.photo_resource}/media?maxHeightPx=400&maxWidthPx=400&key=#{ENV["GOOGLE_API_KEY"]}" %>" alt="<%= event.name %>" style="width: 100%; height: 180px; object-fit: cover;">
            </div>
          <% else %>
            <img src="https://via.placeholder.com/350x180?text=No+Image" alt="No image available" style="width: 100%; height: 180px; object-fit: cover;">
          <% end %>

          <!-- Event details -->
          <div style="padding: 1rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between;">
            <h2 style="font-size: 1.25rem; margin: 0 0 0.5rem 0; font-weight: 600; color: #333;"><%= event.name %></h2>
            <p style="margin: 0 0 1rem 0; color: #666;"><%= event.location %></p>
            <p style="margin: 0 0 1rem 0; color: #666;">
              <strong>Starts:</strong> <%= event.start_time.strftime("%b %d, %Y %l:%M %p") %><br>
              <strong>Ends:</strong> <%= event.end_time.strftime("%b %d, %Y %l:%M %p") %>
            </p>

            <%= link_to 'View Details', event_path(event), style: "text-align: center; display: inline-block; padding: 0.5rem 1rem; background-color: #007bff; color: white; border-radius: 4px; text-decoration: none;" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p style="text-align: center; color: #666; margin-top: 2rem;">No events available.</p>
  <% end %>
</div>

<footer class="footer-bar">
  <a href="<%= root_path %>" aria-label="Home" class="footer-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 9l9-7 9 7" />
      <path d="M9 22V12h6v10" />
    </svg>
  </a>

  <%= link_to groups_path, class: "footer-icon", aria: { label: "Create Event" } do %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10" />
      <line x1="12" y1="8" x2="12" y2="16" />
      <line x1="8" y1="12" x2="16" y2="12" />
    </svg>
  <% end %>

  <a href="#messages" aria-label="Messages" class="footer-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
    </svg>
  </a>

  <%= link_to groups_path, class: "footer-icon", aria: { label: "Groups" } do %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
      <circle cx="9" cy="7" r="4" />
      <path d="M23 21v-2a4 4 0 00-3-3.87" />
      <path d="M16 3.13a4 4 0 010 7.75" />
    </svg>
  <% end %>
</footer>
